(this["webpackJsonpweather-app-payoneer"]=this["webpackJsonpweather-app-payoneer"]||[]).push([[0],{176:function(e,t,n){},182:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(46),s=n.n(c),i=(n(176),n(24)),u=(n(182),n(22)),l=n.n(u),o=n(39),d=n(17),h=n(166),j=n(71),p=n(34),b=n.n(p),f=function(e,t){var n=e-273.15;return"celsius"===t?n:1.8*n+32},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach((function(e){var n=b()(e.dt_txt).format("L");t[n]?t[n]=Object(j.a)(Object(j.a)({},e),{},{hours:[].concat(Object(h.a)(t[n].hours),[e])}):t[n]=Object(j.a)(Object(j.a)({},e),{},{hours:[]})})),Object.values(t)},m=n(2),O=function(e){var t=e.children,n=e.onClick,r=e.disabled,a=e.className;return Object(m.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-md disabled:opacity-20 ".concat(a),onClick:function(){return null===n||void 0===n?void 0:n()},disabled:r,children:t})},v=function(e){var t=e.refreshWeatherData;return Object(m.jsx)(O,{className:"m-10",onClick:t,children:"Refresh"})},g=function(e){var t=e.temperatureUnit,n=e.updateTemperatureUnit,r="celsius"===t,a="fehrenhite"===t;return Object(m.jsxs)("div",{className:"flex justify-center items-center my-5",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"radio",value:"celsius",id:"celsius",className:"appearance-none",checked:"celsius"===t,onChange:n}),Object(m.jsx)("label",{className:"rounded-l-md py-2 px-4 text-white  ".concat(r?"bg-blue-500":"bg-gray-400"),htmlFor:"celsius",children:"Celsius"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"radio",value:"fehrenhite",id:"fehrenhite",className:"appearance-none",checked:"fehrenhite"===t,onChange:n}),Object(m.jsx)("label",{className:"rounded-r-md py-2 px-4 text-white  ".concat(a?"bg-blue-500":"bg-gray-400"),htmlFor:"fehrenhite",children:"Fahrenheit"})]})]})},w=n(27),y="f4419d8c292d14b972ab65ba162602b5",N=function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if(!((n=e.sent).status>=400&&n.status<600)){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"Munich",e.next=3,N("http://api.openweathermap.org/data/2.5/forecast?q=".concat(t,",de&APPID=").concat(y,"&cnt=40"));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=Object(w.b)("weather/fetchAll",Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),C=Object(w.c)({name:"weather",initialState:{data:[],loading:!1,selectedDayData:null,error:null},reducers:{startLoading:function(e){e.loading=!0},endLoading:function(e){e.loading=!1},setWeatherData:function(e,t){e.data=t.payload},selectDay:function(e,t){e.selectedDayData=t.payload},setError:function(e,t){console.log(e,t),e.error=t.payload}}}),U=C.actions,S=U.startLoading,L=U.endLoading,E=U.setWeatherData,P=U.selectDay,F=U.setError,z=C.reducer,T=function(e){var t,n=e.temperature,r=e.temperatureUnit,a=e.date,c=e.hours,s=Object(i.b)();return Object(m.jsxs)("div",{className:"rounded-md p-5 flex flex-col items-center shadow-md  text-white bg-gradient-to-r\tfrom-blue-900 to-blue-800 m-2",children:[Object(m.jsx)("p",{className:"text-sm mb-3",children:b()(a).format("LL")}),Object(m.jsxs)("div",{className:"flex items-start",children:[Object(m.jsx)("span",{className:"text-4xl",children:n}),Object(m.jsx)("span",{className:"text-sm",children:(t=r,"celsius"===t?"\xb0C":"\xb0F")})]}),c.length>0?Object(m.jsx)("span",{className:"underline",onClick:function(){s(P(c))},children:"Hours breakdown"}):null]})},A=function(e){var t=e.weatherData,n=e.temperatureUnit,r=e.page,a=e.nextPage,c=e.prevPage,s=e.pageSize,i=t.slice((r-1)*s,s*r)||[];return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"flex justify-center\tw-full my-5",children:i.map((function(e){var t=function(e,t){var n=e.hours;if(0===n.length)return f(e.main.temp,t).toFixed(2);var r=n.reduce((function(e,t){return e+t.main.temp}),0)/n.length;return f(r,t).toFixed(2)}(e,n);return Object(m.jsx)(T,{temperature:t,temperatureUnit:n,hours:e.hours,date:b()(e.dt_txt).format("L")},e.dt)}))}),t.length>0?Object(m.jsxs)("div",{className:"flex justify-center items-center",children:[Object(m.jsx)(O,{onClick:c,disabled:1===r,children:"Prev"}),Object(m.jsxs)("span",{className:"mx-3",children:[r," / ",Math.floor(t.length/s)]}),Object(m.jsx)(O,{disabled:r===Math.floor(t.length/s),onClick:a,children:"Next"})]}):null]})},W=n(165),M=Object(w.c)({name:"page",initialState:{pageSize:0,page:1},reducers:{increment:function(e){e.page++},decrement:function(e){e.page--},setPageSize:function(e,t){e.pageSize=t.payload}}}),_=M.actions,H=_.increment,I=_.decrement,J=_.setPageSize,K=M.reducer,q=Object(w.c)({name:"temperature",initialState:{unit:"celsius"},reducers:{setUnitToCelsius:function(e){e.unit="celsius"},setUnitToFahernhite:function(e){e.unit="fehrenhite"}}}),B=q.actions,R=B.setUnitToCelsius,G=B.setUnitToFahernhite,Q=q.reducer,V=n(147),X=n.n(V),Y=function(){return Object(m.jsx)("div",{className:"h-screen flex justify-center items-center",children:Object(m.jsx)(X.a,{type:"spin",color:"grey",height:100,width:100})})},Z=n(321),$=n(322),ee=n(162),te=n(163),ne=n(167),re=function(){var e=Object(i.c)((function(e){return e.weatherData})).selectedDayData,t=Object(i.c)((function(e){return e.temperatureUnit})).unit,n=Object(i.b)(),r=(e||[]).map((function(e){return{name:b()(e.dt_txt).format("hh A"),temp:f(e.main.temp,t),day:b()(e.dt_txt).format("LL")}}));return Object(m.jsx)("div",{children:r.length>0?Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"w-screen flex flex-col items-center",children:[Object(m.jsxs)("h1",{className:"my-3 flex flex-col",children:[Object(m.jsx)("span",{children:r[0].day}),Object(m.jsx)("span",{className:"text-blue-900 text-center underline ",onClick:function(){return n(P(null))},children:"CLOSE"})]}),Object(m.jsx)("div",{className:"flex flex-col items-stretch w-80",children:Object(m.jsx)(Z.a,{width:"100%",minHeight:300,children:Object(m.jsxs)($.a,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[Object(m.jsx)(ee.a,{dataKey:"name"}),Object(m.jsx)(te.a,{}),Object(m.jsx)(ne.a,{dataKey:"temp",fill:"#8884d8"})]})})})]})}):null})},ae=function(){var e=Object(W.a)(),t=Object(d.a)(e,1)[0],n=Object(i.c)((function(e){return e.page})),a=n.page,c=n.pageSize,s=Object(i.c)((function(e){return e.temperatureUnit})).unit,u=Object(i.c)((function(e){return e.weatherData})),h=u.data,j=void 0===h?[]:h,p=u.loading,b=u.error,f=Object(i.b)();Object(r.useEffect)((function(){f(J(t>700?3:1))}),[t,f]);var O=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(S()),e.next=4,f(D());case 4:return n=e.sent,e.next=7,Object(w.d)(n);case 7:r=e.sent,a=x(null!==(t=null===r||void 0===r?void 0:r.list)&&void 0!==t?t:[]),f(E(a)),f(L()),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),f(L()),f(F(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=Object(r.useCallback)(O,[f]);return Object(r.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[f,y]),Object(m.jsxs)("div",{className:"flex flex-col justify-center items-center p-2",children:[Object(m.jsx)("h3",{children:"Weather App"}),p&&!b?Object(m.jsx)(Y,{}):null,p||b?null:Object(m.jsxs)("div",{className:"flex flex-col items-center",children:[Object(m.jsx)(g,{temperatureUnit:s,updateTemperatureUnit:function(e){var t=e.target.value;f("celsius"===t?R():G())}}),Object(m.jsx)(A,{temperatureUnit:s,weatherData:j,page:a,pageSize:c,nextPage:function(){return f(H())},prevPage:function(){return f(I())}}),Object(m.jsx)(re,{})]}),p?null:Object(m.jsx)(v,{refreshWeatherData:function(){f(F(null)),O()}}),b?Object(m.jsx)("p",{className:"text-red-500 text-lg  text-center",children:b}):null]})},ce=Object(w.a)({reducer:{page:K,temperatureUnit:Q,weatherData:z}});var se=function(){return Object(m.jsx)("div",{className:"App weather-app",children:Object(m.jsx)(i.a,{store:ce,children:Object(m.jsx)(ae,{})})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(se,{})}),document.getElementById("root"))}},[[319,1,2]]]);
//# sourceMappingURL=main.36c110b0.chunk.js.map